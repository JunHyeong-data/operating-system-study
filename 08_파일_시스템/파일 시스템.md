# 파일 시스템

## 1. 파일 시스템 개요
- **정의**: 파일과 디렉터리를 보조기억장치에 저장하고 접근할 수 있도록 하는 운영체제의 내부 프로그램
- **역할**:
  - 저장장치에 파일/디렉터리 할당 및 접근
  - 다양한 파일 시스템 존재 (FAT, UNIX 등)
  - 하나의 컴퓨터에서 여러 파일 시스템 사용 가능

## 2. 저장장치 초기 세팅: 파티셔닝과 포맷팅
### 2.1 파티셔닝 (Partitioning)
- **정의**: 저장장치를 논리적인 영역(파티션)으로 나누는 작업
- **예시 비유**: 큰 서랍에 칸막이를 설치해 정리정돈
- **결과**: 각 파티션은 독립적인 파일 시스템을 가질 수 있음

### 2.2 포맷팅 (Formatting)
- **정의**: 파일 시스템을 설정하여 저장/관리 방식 결정
- **종류**:
  - 저수준 포맷: 공장에서 물리적 포맷
  - 논리적 포맷: 사용자 파일 시스템 설정 (보통 의미하는 포맷)
- **결과**: 파일 시스템이 결정되고, 파일/디렉터리 생성 가능

## 3. 파일 저장 단위: 블록
- **운영체제는 파일을 블록 단위로 읽고 씀**
  - 블록: 여러 섹터를 묶은 단위 (섹터는 너무 작아 관리 어려움)

## 4. 블록 할당 기법
### 4.1 연속 할당 (Contiguous Allocation)
- **특징**: 연속적인 블록에 파일 저장
- **디렉터리 엔트리**: 파일 이름, 시작 블록 주소, 블록 수
- **장점**: 위치 계산이 간단
- **단점**: 외부 단편화 발생

### 4.2 불연속 할당 (Non-Contiguous Allocation)
#### 4.2.1 연결 할당 (Linked Allocation)
- **특징**: 각 블록에 다음 블록 주소 저장
- **구조**: 연결 리스트 형태
- **장점**: 외부 단편화 없음
- **단점**:
  - 임의 접근 속도 느림 (항상 처음부터 읽어야 함)
  - 블록 손상 시 이후 블록 접근 불가

#### 4.2.2 색인 할당 (Indexed Allocation)
- **특징**: 파일 블록 주소들을 한 블록(색인 블록)에 저장
- **장점**:
  - 임의 접근 쉬움
  - 연결 리스트 문제 해결
- **디렉터리 엔트리**: 파일 이름, 색인 블록 주소

## 5. 실제 파일 시스템
### 5.1 FAT (File Allocation Table) 파일 시스템
- **기반**: 연결 할당 기반, 단점 보완
- **FAT 구조**:
  - 각 블록의 다음 블록 주소를 FAT 테이블로 관리
  - FAT 테이블은 메모리에 캐시 가능 (빠른 임의 접근 가능)
- **디렉터리 엔트리**:
  - 파일 이름, 시작 블록 주소, 속성 정보 등
- **FAT 파일 접근 예시**:
  1. 루트 디렉터리 접근
  2. 하위 디렉터리 탐색
  3. 시작 블록부터 FAT 따라가며 블록 읽기
- **버전**:
  - FAT12, FAT16, FAT32 (숫자는 블록 번호 표현 비트 수)

### 5.2 UNIX 파일 시스템
- **기반**: 색인 할당
- **핵심 개념**: 아이노드(inode)
  - 파일 속성 정보와 최대 15개의 블록 주소 저장
  - 파일마다 고유 아이노드 존재
  - 아이노드는 특정 영역에 모여 저장됨

## 6. 정리
- 파일 시스템은 운영체제가 파일/디렉터리를 효율적으로 저장, 관리하기 위한 핵심 구조
- 다양한 할당 기법 존재하며, 각각 장단점이 있음
- FAT와 UNIX는 대표적인 파일 시스템 구현 예
