# 💥 교착상태 (Deadlock)

## 🚦 교착상태란?
- 도심의 교통 마비처럼, **프로세스들이 자원을 서로 점유한 채 대기만 하며** 아무도 실행되지 못하는 상태
- 운영체제가 반드시 해결해야 할 문제 중 하나

---

## 🍽 식사하는 철학자 문제 (Dining Philosophers Problem)

### 💡 문제 설명
- 철학자 5명이 둥근 식탁에 앉아 있음
- 각 철학자는 **2개의 포크**가 있어야 식사가 가능
- 행동 순서:
  1. 생각한다
  2. 왼쪽 포크를 집는다 (가능할 경우)
  3. 오른쪽 포크를 집는다 (가능할 경우)
  4. 식사한다
  5. 오른쪽 포크를 내려놓는다
  6. 왼쪽 포크를 내려놓는다
  7. 다시 반복

### ❗️문제 발생
- 모든 철학자가 동시에 왼쪽 포크를 집으면 → 오른쪽 포크를 못 집는다
- 모두가 **서로의 자원을 기다리게 되어** 교착상태 발생

---

## 💻 컴퓨터에서의 교착상태 예시

- 프로세스 A (게임): 자원 A 사용 중, 자원 B 대기
- 프로세스 B (웹브라우저): 자원 B 사용 중, 자원 A 대기
- → 서로 **자원을 내놓지 않고 기다리기만 하여** 교착상태 발생

---

## 📉 자원 할당 그래프 (Resource Allocation Graph)

### 📌 표현 방법
- **프로세스**: 동그라미 (`○`)
- **자원**: 사각형 (`□`)
- **자원의 개수**: 사각형 안의 ● 점 개수
- **자원 할당**: 자원 → 프로세스로 화살표
- **자원 요청**: 프로세스 → 자원으로 화살표

### 📈 예시 해석
- 프로세스 A: SSD 1개 사용 중
- 프로세스 B, C: 각각 CPU 1개씩 사용 중
- 프로세스 D: 프린터 1개 사용 중
- 프로세스 E: 프린터 대기 중
- 프로세스 F: CPU 대기 중

### 🔄 그래프 특징
- **교착상태가 발생한 그래프**는 대부분 **원형 형태 (cycle)**를 가짐

---

## 📌 교착상태 발생 조건 (Coffman 조건)

| 조건 | 설명 | 영어 명칭 |
|------|------|------------|
| 1. 상호 배제 (Mutual Exclusion) | 자원은 하나의 프로세스만 사용할 수 있음 | `Mutual Exclusion` |
| 2. 점유와 대기 (Hold and Wait) | 자원을 가진 채 다른 자원을 기다림 | `Hold and Wait` |
| 3. 비선점 (No Preemption) | 자원을 강제로 뺏을 수 없음 | `No Preemption` |
| 4. 원형 대기 (Circular Wait) | 원형으로 자원을 서로 기다림 | `Circular Wait` |

> ✅ **4가지 조건을 모두 만족하면 교착상태 발생 가능**  
> ✅ 하나라도 충족하지 않으면 교착상태는 발생하지 않음

---

## ✅ 요약

- 교착상태: 프로세스들이 자원을 점유한 채 서로 기다리기만 하며 실행 불가한 상태
- 대표 예시: **식사하는 철학자 문제**
- 자원 할당 그래프: **원형 구조**가 교착상태의 힌트
- 교착 상태 발생 4조건:
  - **상호배제**, **점유대기**, **비선점**, **원형대기**

---

🔜 **다음 강의**에서는 교착상태 해결 방법에 대해 배웁니다!
