# 동기화란?

프로세스들이 협력하여 실행될 때는 **실행 순서**와 **공유 자원의 일관성**을 보장해야 합니다. 이를 위해 반드시 **동기화(Synchronization)**가 필요합니다.

이 절에서는 동기화의 개념을 알아보고, 동기화가 제대로 이루어지지 않을 경우 어떤 문제가 발생하는지를 살펴봅니다.

---

## 동기화의 의미

여러 프로세스가 협력적으로 실행될 때, **무작위로 동시에 실행**되어서는 안 됩니다.  
**올바른 실행을 보장하기 위해 동기화가 필수**입니다.

**프로세스 동기화란** 여러 프로세스의 실행 시점을 조정하는 것을 의미합니다.  
이는 다음 두 가지 목적을 가집니다:

1. **실행 순서 제어**  
   - 프로세스들이 정해진 순서대로 실행되도록 조정
   - 예: 어떤 작업이 끝난 후 다른 작업이 시작되어야 할 때

2. **상호 배제(Mutual Exclusion)**  
   - 동시에 접근해서는 안 되는 자원에 대해 하나의 프로세스만 접근할 수 있도록 제한

---

## 실행 순서 제어 예시

여러 프로세스가 동시에 실행될 경우, 작업 순서가 중요할 때가 많습니다.  
예를 들어, 생산자가 데이터를 저장한 후 소비자가 이를 읽도록 순서를 제어해야 합니다.  
이처럼 순서를 맞추기 위한 동기화가 필요합니다.

---

## 상호 배제를 위한 동기화

**상호 배제**는 공유 자원의 **동시 접근을 막기 위한 동기화 방식**입니다.

예를 들어, 은행 계좌의 잔액을 두 개의 프로세스가 동시에 수정하려고 할 때,  
동기화가 안 되면 계산 오류가 발생할 수 있습니다.  
이처럼 동시에 접근해서는 안 되는 자원을 보호하기 위한 것이 바로 **상호 배제를 위한 동기화**입니다.

---

## 생산자와 소비자 문제

상호 배제를 설명할 때 자주 등장하는 대표적인 문제입니다.

- **생산자**: 데이터를 계속 생산함
- **소비자**: 데이터를 계속 소비함

이때 생산자와 소비자가 **공용 자원(버퍼 등)**에 동시에 접근하면 문제가 발생합니다.  
따라서 **서로 배타적으로 자원에 접근하도록 동기화가 필요**합니다.

---

## 공유 자원과 임계 구역

**공유 자원(Shared Resource)**이란, 여러 프로세스가 함께 사용하는 자원을 말합니다.  
예: `잔액`, `총합` 등의 전역 변수

이 중에서 **동시 접근 시 문제가 생기는 부분**을 **임계 구역(Critical Section)**이라 합니다.

- 임계 구역은 **한 번에 하나의 프로세스만** 접근할 수 있어야 합니다.
- 동시에 여러 프로세스가 접근하면 **레이스 컨디션(Race Condition)**이 발생할 수 있습니다.

---

## 레이스 컨디션

**레이스 컨디션**은 여러 프로세스가 동시에 임계 구역에 진입해  
데이터가 꼬이는 상황입니다.

- 계좌 잔액 문제, 생산자-소비자 문제는 모두 레이스 컨디션의 사례입니다.
- 데이터의 일관성이 깨지고, 예기치 못한 결과가 발생합니다.

이러한 문제를 막기 위해, 운영체제는 임계 구역을 보호하기 위한  
**동기화 메커니즘**을 제공합니다.

---

## 상호 배제를 위한 3가지 원칙

운영체제는 다음 세 가지 원칙을 통해 임계 구역 문제를 해결하려고 합니다.

1. **상호 배제 (Mutual Exclusion)**  
   - 한 프로세스가 임계 구역에 진입하면 다른 프로세스는 진입할 수 없음

2. **진행 (Progress)**  
   - 임계 구역에 아무도 진입하지 않은 상태라면  
     진입을 원하는 프로세스는 언젠가는 들어갈 수 있어야 함

3. **유한 대기 (Bounded Waiting)**  
   - 어떤 프로세스가 임계 구역 진입을 요청하면  
     무한히 기다리는 일이 없어야 함

---
