# 프로세스 개요

## 1. 프로세스란?
- **프로세스(Process)**: 실행 중인 프로그램.
- 프로그램은 실행되기 전까지는 보조기억장치에 저장된 **정적 데이터**일 뿐이며,
  메모리에 적재되어 실행되면 **프로세스**가 됨.
- 이 과정을 **프로세스를 생성한다**고 함.

---

## 2. 프로세스 확인 방법
- **Windows**: 작업 관리자 → [프로세스] 탭
- **UNIX/Linux**: `ps` 명령어

### ● 프로세스의 유형
- **포그라운드 프로세스**: 사용자에게 보이는 실행 중인 프로그램
- **백그라운드 프로세스**: 사용자에게 보이지 않는 프로세스
  - **데몬(Daemon)**: UNIX 계열에서 상호작용 없이 동작
  - **서비스(Service)**: Windows에서 백그라운드에서 동작

---

## 3. 프로세스 제어 블록 (PCB: Process Control Block)

운영체제가 프로세스를 관리하기 위해 사용하는 **자료구조**.

### ● PCB에 저장되는 정보
- **프로세스 ID (PID)**: 고유 식별 번호
- **레지스터 값**: 프로그램 카운터(PC) 등, 실행 중이던 정보
- **프로세스 상태**: 실행 중, 대기 중, 입출력 대기 중 등
- **CPU 스케줄링 정보**: 우선순위, 대기 시간 등
- **메모리 정보**: 베이스/한계 레지스터 등
- **사용 중인 파일과 입출력 장치 정보**

---

## 4. 문맥 교환 (Context Switch)

- **문맥(Context)**: 프로세스의 실행 상태(레지스터 값 등) → PCB에 저장됨
- **문맥 교환(Context Switch)**:  
  → A 프로세스 실행 종료  
  → A의 문맥을 PCB에 저장  
  → B 프로세스의 문맥을 PCB에서 복구  
  → B 실행

---

## 5. 프로세스의 메모리 영역 (상세 설명)

운영체제는 하나의 프로세스가 사용하는 메모리를 **여러 영역으로 나누어 관리**합니다.  
이 메모리 구조는 주로 **코드(Code)**, **데이터(Data)**, **힙(Heap)**, **스택(Stack)**의 네 부분으로 구성됩니다.

---

### 🔸 코드 영역 (Code Segment)
- **내용**: 프로그램이 실행할 **기계어 명령어(명령 코드)**가 저장됨
- **특징**:
  - 읽기 전용(Read-Only)
  - 실행 파일에서 메모리로 적재되는 최초의 부분
  - 코드 수정은 일반적으로 불가능 → 보안상 안전
- **예시**:
  - `main()` 함수 본문
  - 조건문, 반복문 등이 포함된 실행 명령들

---

### 🔸 데이터 영역 (Data Segment)
- **내용**: **전역 변수(Global)**, **정적 변수(Static)**가 저장됨
- **특징**:
  - 프로그램 시작 시 메모리에 적재되고, 종료 시까지 유지됨
  - 초기화 여부에 따라 두 영역으로 나뉨:
    - **초기화된 데이터 영역** (`.data`): 초기값이 있는 변수 저장
    - **초기화되지 않은 데이터 영역** (`.bss`): 초기값이 없는 변수 저장 (기본값 0)
- **예시**:
  ```c
  int global_var = 10;   // 초기화된 데이터 영역
  static int counter;    // 초기화되지 않은 데이터 영역 (.bss)

---

### 🔸 힙 영역 (Heap Segment)

- **내용**: 런타임 중 동적 메모리 할당에 사용됨 (`malloc`, `new` 등)

- **특징**:
  - 크기가 고정되지 않음: 프로그램 실행 중 **동적으로 증가 또는 감소**
  - **낮은 주소 → 높은 주소** 방향으로 확장됨
  - 프로그래머가 직접 `free` 또는 `delete`로 **해제해야 함**
  - 해제를 하지 않으면 **메모리 누수(memory leak)** 발생 가능

- **예시** (C):
  ```c
  int* arr = (int*)malloc(sizeof(int) * 100);  // 힙 메모리 할당

---

### 🔸 스택 영역 (Stack Segment)

- **내용**: 함수 호출 시 생성되는 지역 변수, 매개변수, 리턴 주소 등을 저장

- **특징**:
  - 함수 호출 시마다 생성되고, 호출이 끝나면 **자동으로 제거됨** (자동 메모리 관리)
  - **높은 주소 → 낮은 주소** 방향으로 확장됨 (힙과 반대)
  - 크기를 초과하여 사용할 경우 **스택 오버플로우(Stack Overflow)** 발생

- **예시 (C)**:
  ```c
  void func() {
      int local_var = 10; // 스택 영역에 저장됨
  }

---

### ✅ 요약

- **코드 영역**: 기계어 명령어 저장, 읽기 전용  
- **데이터 영역**: 전역/정적 변수 저장, 프로그램 생존 기간 동안 유지  
- **힙 영역**: 동적 메모리 저장, 수동 해제 필요  
- **스택 영역**: 함수 호출 시 임시 데이터 저장, 자동 해제  

> 힙과 스택은 **확장 방향이 반대**이며, **중간 충돌 시 오류 발생 가능**

---

## ✅ 학습 포인트 요약
- 실행 중인 프로그램 = **프로세스**
- 운영체제는 PCB로 프로세스를 관리함
- 프로세스 간 전환 시 문맥 교환이 발생
- 프로세스는 코드/데이터/힙/스택 영역으로 메모리에 적재됨
- 힙은 직접 해제해야 하며, 안 하면 메모리 누수 발생

