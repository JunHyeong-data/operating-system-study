# 🧠 페이징을 통한 가상 메모리 관리

**가상 메모리**는 프로그램 전체가 메모리에 없어도 실행할 수 있도록 해주는 기술입니다.  
이를 통해 **물리 메모리보다 큰 프로그램도 실행 가능**하며, **외부 단편화 문제**도 해결할 수 있습니다.

> 현재 운영체제는 대부분 **페이징(Paging)** 기법을 사용합니다.

---

## 📑 페이징(Paging)이란?

**페이징**은 다음과 같은 방식으로 메모리를 관리합니다:

- 프로세스의 **논리 주소 공간** → `페이지(Page)`라는 단위로 분할
- 메모리의 **물리 주소 공간** → `프레임(Frame)`이라는 동일 크기의 단위로 분할
- 각 페이지를 프레임에 **불연속적으로 할당**하여 외부 단편화 문제 해결

> ✅ 페이지는 프로세스의 논리적 조각, 프레임은 메모리의 물리적 조각입니다.

---

## 🔄 페이지 단위 스와핑

페이징 시스템에서는 **프로세스 전체**가 아닌, **페이지 단위로 스와핑**이 이루어집니다.

- **페이지 아웃**: 사용되지 않는 페이지를 보조 기억장치로 이동
- **페이지 인**: 필요한 페이지만 다시 메모리로 불러오기

👉 이 덕분에 전체 프로세스가 메모리에 없어도 실행이 가능합니다.

---

## 📘 페이지 테이블 (Page Table)

프로세스가 **불연속적으로** 메모리에 배치되어도, CPU는 **논리 주소**만으로 실행할 수 있어야 합니다.  
이때 사용하는 것이 **페이지 테이블**입니다.

### 페이지 테이블의 역할
- **페이지 번호 ↔ 프레임 번호** 매핑 정보 저장
- CPU는 논리 주소를 **페이지 테이블**을 통해 **물리 주소로 변환**

### 구성 요소
- 각 프로세스마다 고유한 페이지 테이블 보유
- **페이지 테이블 베이스 레지스터(PTBR)**: 현재 실행 중인 프로세스의 페이지 테이블 주소를 저장

---

## ⚠️ 페이지 테이블 접근 문제

페이지 테이블이 메모리에 있기 때문에:

- 메모리 접근 시 **2번** 접근 필요
  - 페이지 테이블 → 프레임 번호 획득
  - 프레임 접근

이를 해결하기 위해 등장한 것이 **TLB**입니다.

---

## ⚡ TLB (Translation Lookaside Buffer)

TLB는 **페이지 테이블의 캐시** 역할을 수행합니다.

- **TLB 히트**: 페이지 번호가 TLB에 있음 → 바로 프레임 접근
- **TLB 미스**: 페이지 번호가 TLB에 없음 → 페이지 테이블 접근 필요

👉 TLB를 사용하면 **메모리 접근 속도**를 크게 향상시킬 수 있습니다.

---

## 📍 페이징 주소 변환

모든 **논리 주소**는 다음과 같이 구성됩니다:

- `<페이지 번호, 변위(offset)>`

주소 변환 과정은 다음과 같습니다:

1. 페이지 테이블에서 페이지 번호로 프레임 번호를 찾음
2. 물리 주소는 `<프레임 번호, 변위>`로 구성

> 예: `논리 주소(2, 20)` → 페이지 2가 프레임 7에 할당 → `물리 주소(7, 20)`

---

## 📄 페이지 테이블 엔트리 (PTE: Page Table Entry)

각 페이지 테이블의 행은 **PTE**라고 하며, 다음 정보를 담고 있습니다:

| 속성         | 설명                                                                 |
|--------------|----------------------------------------------------------------------|
| 프레임 번호   | 해당 페이지가 매핑된 물리 메모리 프레임 번호                         |
| 유효 비트     | 페이지가 메모리에 존재하면 1, 아니면 0                                |
| 보호 비트     | 해당 페이지의 읽기/쓰기 권한 정보                                     |
| 참조 비트     | CPU가 해당 페이지를 접근한 적이 있는지 여부                           |
| 수정 비트     | 페이지가 수정되었는지 여부 (1이면 수정됨 = 더티 비트)                |

### 💡 수정 비트(Dirty Bit)
- 수정된 페이지는 **보조기억장치에 다시 기록해야 함**
- 수정되지 않은 페이지는 **다시 기록할 필요 없음**

---

## ✅ 요약

| 개념           | 설명 |
|----------------|------|
| 페이징         | 논리 주소 공간을 페이지 단위로 분할, 프레임에 비연속적으로 할당 |
| 페이지 테이블  | 페이지 번호 → 프레임 번호 매핑 정보 보유 |
| TLB            | 페이지 테이블 캐시 역할, 주소 변환 속도 향상 |
| 주소 변환      | 논리 주소 `<페이지 번호, 변위>` → 물리 주소 `<프레임 번호, 변위>` |
| 페이지 테이블 엔트리 | 프레임 번호, 유효 비트, 보호 비트, 참조/수정 비트 등 포함 |

---

